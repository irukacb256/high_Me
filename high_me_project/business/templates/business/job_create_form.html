{% extends 'business/dashboard_base.html' %}

{% block content %}
<style>
    .form-container { max-width: 1000px; margin: 0 auto; padding-top: 20px; padding-bottom: 120px; }
    .section-card { background: white; padding: 35px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #eee; }
    
    /* ひな形プレビューカード (画像2の再現) */
    .template-preview-card { background: white; border-radius: 8px; border: 1px solid #eee; display: flex; padding: 0; overflow: hidden; margin-bottom: 30px; }
    .template-img { width: 300px; height: 180px; background: #f9f9f9; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .template-img img { width: 100%; height: 100%; object-fit: cover; }
    .template-info-box { padding: 25px; flex: 1; }
    .meta-text { font-size: 13px; color: #888; margin-bottom: 8px; }
    .template-title-display { font-size: 18px; font-weight: bold; color: #007AFF; margin-bottom: 12px; display: block; }
    .location-text { font-size: 13px; color: #333; display: flex; align-items: center; gap: 5px; }

    .section-title { font-size: 18px; font-weight: bold; margin-bottom: 30px; color: #333; border-left: 5px solid #007AFF; padding-left: 15px; display: flex; align-items: center; }
    label { display: block; margin-bottom: 10px; font-weight: bold; font-size: 14px; color: #333; }
    .required-tag { background: #ff3b30; color: white; font-size: 10px; padding: 2px 5px; border-radius: 2px; margin-left: 8px; }
    
    input[type="text"], input[type="number"], input[type="date"], input[type="time"], textarea, select { 
        width: 100%; padding: 14px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; margin-bottom: 20px; font-size: 14px;
    }
    .flex-row { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; }
    .flex-item { flex: 1; }

    /* 下部固定フッター */
    .bottom-bar { position: fixed; bottom: 0; left: 240px; right: 0; background: white; padding: 20px 40px; border-top: 1px solid #ddd; display: flex; justify-content: center; z-index: 1000; }
    .btn-confirm { background: #007AFF; color: white; border: none; padding: 16px; width: 100%; max-width: 650px; border-radius: 8px; font-weight: bold; font-size: 16px; cursor: pointer; }
</style>

<div class="form-container">
    <h1 style="font-size: 22px; margin-bottom: 30px;">求人を作成</h1>
    <p style="font-size: 14px; color: #666; margin-bottom: 20px;">求人に必要な情報を入力してください。</p>

    <!-- 1. 求人のひな形プレビュー (画像2) -->
    <div class="section-card" style="padding: 0; overflow: hidden;">
        <div style="padding: 15px 25px; border-bottom: 1px solid #eee; font-weight: bold; font-size: 16px;">求人のひな形</div>
        <div class="template-preview-card" style="border: none; margin-bottom: 0;">
            <div class="template-img">
                <!-- サンプル画像。実際は template.img1.url など -->
                <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&q=80&w=300&h=180" alt="ピザ">
            </div>
            <div class="template-info-box">
                <div class="meta-text">{{ template.industry }} / {{ template.occupation }}</div>
                <span class="template-title-display">{{ template.title }}</span>
                <div class="location-text">
                    <i class="fa-solid fa-location-dot"></i> {{ template.address }}
                </div>
                <div class="meta-text" style="margin-top: 10px;">最終更新日時: {{ template.updated_at|date:"Y年m月d日 H:i"|default:template.created_at|date:"Y年m月d日 H:i" }}</div>
            </div>
        </div>
    </div>

    <form method="POST">
        {% csrf_token %}
        
        <!-- 2. 求人内容 (画像3, 4, 5) -->
        <div class="section-card">
            <div class="section-title">求人内容</div>
            
            <div class="flex-row">
                <div style="width: 250px;">
                    <label>求人日 <span class="required-tag">必須</span></label>
                    <input type="date" name="work_date" value="2025-04-29" required>
                </div>
                <div class="flex-item">
                    <label>開始 <span class="required-tag">必須</span></label>
                    <input type="time" name="start_time" value="18:00" required>
                </div>
                <div style="padding-top: 15px; font-weight: bold;">〜</div>
                <div class="flex-item">
                    <label>終了 <span class="required-tag">必須</span></label>
                    <input type="time" name="end_time" value="23:00" required>
                </div>
                <div style="padding-top: 15px; font-size: 12px; color: #888;">(5時間0分)</div>
            </div>

            <!-- タイトルはひな形から引き継ぎ（非表示でも可だが、確認のため表示） -->
            <input type="hidden" name="title" value="{{ template.title }}">

            <div class="flex-row">
                <div class="flex-item">
                    <label>休憩の開始</label>
                    <input type="time" name="break_start" placeholder="--:--">
                </div>
                <div class="flex-item">
                    <label>休憩時間</label>
                    <div style="display:flex; align-items:center; gap:10px;">
                        <input type="number" name="break_duration" value="0" style="margin-bottom:0;"> 
                        <span>分</span>
                    </div>
                </div>
            </div>

            <div style="max-width: 400px;">
                <label>求人の締切時間</label>
                <select name="deadline">
                    <option value="start">【推奨】開始時刻と同時</option>
                    <option value="1h">1時間前</option>
                </select>
            </div>

            <div style="width: 150px;">
                <label>募集人数 <span class="required-tag">必須</span></label>
                <div style="display:flex; align-items:center; gap:10px;">
                    <input type="number" name="count" value="1" style="margin-bottom:0;" required>
                    <span>人</span>
                </div>
            </div>
        </div>

        <!-- その他（時給等）は以前の構成を維持 -->
        <div class="section-card">
            <div class="section-title">時給・交通費</div>
            <div style="max-width: 500px;">
                <label>時給 <span class="required-tag">必須</span></label>
                <input type="number" name="wage" value="1300" required>
                <label>交通費 <span class="required-tag">必須</span></label>
                <input type="number" name="transport" value="700" required>
            </div>
        </div>

        <div class="bottom-bar">
            <button type="submit" class="btn-confirm">入力した求人内容を確認</button>
        </div>
    </form>
</div>
{% endblock %}