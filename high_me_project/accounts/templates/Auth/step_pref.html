{% extends 'Auth/signup_base.html' %}



{% block title %}仕事を探したい都道府県を選んでください{% endblock %}

{% block form_content %}
<div style="flex:1; overflow-y:auto; border-top:1px solid #eee;">

    <!-- Hidden required input to control the Next button via base script -->
    <input type="text" id="pref-validator" required
        style="opacity: 0; position: absolute; pointer-events: none; height: 0;">

    {% for pref in prefectures %}
    <label class="option-item">
        <input class="form-input pref-check" type="checkbox" name="prefs" value="{{ pref }}">
        <span style="font-size:16px;">{{ pref }}</span>
    </label>
    {% endfor %}
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const checks = document.querySelectorAll('.pref-check');
        const validator = document.getElementById('pref-validator');

        function updateValidator() {
            let any = false;
            checks.forEach(c => { if (c.checked) any = true; });
            validator.value = any ? 'ok' : '';
            // Trigger input event so base script re-checks validation
            validator.dispatchEvent(new Event('input', { bubbles: true }));
        }

        checks.forEach(c => c.addEventListener('change', updateValidator));
        // Initial check needed? validator is empty, button disabled. Correct.
    });
</script>
{% endblock %}

{% block footer_class %}single-btn{% endblock %}

{% block footer_buttons %}
<button type="submit" class="btn-next" disabled>次へ</button>
{% endblock %}